<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Shiro 测试页</title>
    <style>
        body { font-family: system-ui, Arial, sans-serif; margin: 24px; }
        input { margin: 4px; padding: 6px; }
        button { margin: 4px; padding: 6px 10px; }
        pre { background:#f6f8fa; padding:12px; border-radius:6px; }
    </style>
    <script>
        async function call(method, url, body) {
            const res = await fetch(url, {
                method,
                headers: { 'Content-Type': 'application/json' },
                body: body ? JSON.stringify(body) : undefined,
                credentials: 'include'
            });
            const text = await res.text();
            document.getElementById('out').textContent = text;
        }
    </script>
    </head>
<body>
<h2>Shiro 测试</h2>
<div>
    <input id="u" placeholder="username" value="admin"/>
    <input id="p" placeholder="password" type="password" value="admin"/>
    <button onclick="call('POST','/auth/login',{userName: u.value, password: p.value})">登录</button>
    <button onclick="call('POST','/auth/logout')">登出</button>
</div>

<div>
    <button onclick="call('GET','/public/ping')">公共 Ping</button>
    <button onclick="call('GET','/private/ping')">私有 Ping</button>
    <button onclick="location.href='/swagger-ui/index.html'">Swagger</button>
    <button onclick="call('POST','/user/login',{userName: u.value, password: p.value})">旧 /user/login</button>
    <p>提示：Shiro 默认基于会话，fetch 已开启 credentials: 'include' 以携带 Cookie。</p>
    <pre id="out"></pre>
 </div>
</body>
</html>


